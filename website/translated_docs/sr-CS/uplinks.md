---
id: uplinks
title: "Uplinks"
---
*uplink* je link koji sadrži external registry koji omogućava pristup do external packages.

![Uplinks](/img/uplinks.png)

### Kako se koristi

```yaml
uplinks:
  npmjs:
   url: https://registry.npmjs.org/
  server2:
    url: http://mirror.local.net/
    timeout: 100ms
  server3:
    url: http://mirror2.local.net:9000/
  baduplink:
    url: http://localhost:55666/
```

### Konfigurisanje

Možete definisati više uplinks-a, a svaki od njih mora imati jedinstveno ime (key). uplinks mogu imati dva svojstva:

| Svojstvo            | Tip     | Potrebno | Primer                                 | Podrška | Opis                                                                                                                               | Podrazumevano     |
| ------------------- | ------- | -------- | -------------------------------------- | ------- | ---------------------------------------------------------------------------------------------------------------------------------- | ----------------- |
| url                 | string  | Da       | https://registry.npmjs.org/            | potpuna | Url registry-a                                                                                                                     | npmjs             |
| ca                  | string  | Ne       | ~./ssl/client.crt'                     | potpuna | Put to SSL certifikata                                                                                                             | Nema ništa zadato |
| timeout             | string  | Ne       | 100ms                                  | potpuna | podesite novi timeout za request                                                                                                   | 30s               |
| maxage              | string  | Ne       | 10m                                    | potpuna | limitira maksimalni broj neuspelih zahteva                                                                                         | 2m                |
| fail_timeout        | string  | Ne       | 10m                                    | potpuna | definiše maksimalno vreme nakon kojeg zahtev postaje neuspešan                                                                     | 5m                |
| max_fails           | number  | No       | 2                                      | potpuna | limitira maksimalni broj neuspelih zahteva                                                                                         | 2                 |
| cache               | boolean | Ne       | [true,false]                           | >= 2.1  | keširanje svih tarballs iz storage-a                                                                                               | true              |
| auth                | list    | Ne       | [vidi ispod](uplinks.md#auth-property) | >= 2.5  | dodeljuje zaglavlje 'Authorization' [više informacija](http://blog.npmjs.org/post/118393368555/deploying-with-npm-private-modules) | onemogućeno       |
| zaglavlja (headers) | list    | Ne       | autorizacija: "Bearer SecretJWToken==" | potpuna | list of custom headers for the uplink                                                                                              | disabled          |
| strict_ssl          | boolean | No       | [true,false]                           | >= 3.0  | If true, requires SSL certificates be valid.                                                                                       | true              |

#### Auth property

The `auth` property allows you to use an auth token with an uplink. Using the default environment variable:

```yaml
uplinks:
  private:
    url: https://private-registry.domain.com/registry
    auth:
      type: bearer
      token_env: true # defaults to `process.env['NPM_TOKEN']`   
```

or via a specified environment variable:

```yaml
uplinks:
  private:
    url: https://private-registry.domain.com/registry
    auth:
      type: bearer
      token_env: FOO_TOKEN
```

`token_env: FOO_TOKEN`internally will use `process.env['FOO_TOKEN']`

or by directly specifying a token:

```yaml
uplinks:
  private:
    url: https://private-registry.domain.com/registry
    auth:
      type: bearer
      token: "token"
```

> Note: `token` has priority over `token_env`

### You Must know

* Verdaccio does not use Basic Authentication since version `v2.3.0`. All tokens generated by verdaccio are based on JWT ([JSON Web Token](https://jwt.io/))
* Uplinks must be registries compatible with the `npm` endpoints. Eg: *verdaccio*, `sinopia@1.4.0`, *npmjs registry*, *yarn registry*, *JFrog*, *Nexus* and more.
* Setting `cache` to false will help to save space in your hard drive. This will avoid store `tarballs` but [it will keep metadata in folders](https://github.com/verdaccio/verdaccio/issues/391).
* Exceed with multiple uplinks might slow down the lookup of your packages due for each request a npm client does, verdaccio does 1 call for each uplink.
* The (timeout, maxage and fail_timeout) format follow the [NGINX measurement units](http://nginx.org/en/docs/syntax.html)