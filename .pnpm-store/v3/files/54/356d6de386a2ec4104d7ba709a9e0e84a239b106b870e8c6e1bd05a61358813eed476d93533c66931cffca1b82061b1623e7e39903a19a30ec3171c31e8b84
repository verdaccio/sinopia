"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = _default;

function _default(route) {
  route.get('/whoami', (req, res, next) => {
    if (req.headers.referer === 'whoami') {
      next({
        username: req.remote_user.name
      });
    } else {
      next('route');
    }
  });
  route.get('/-/whoami', (req, res, next) => {
    next({
      username: req.remote_user.name
    });
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9hcGkvZW5kcG9pbnQvYXBpL3dob2FtaS50cyJdLCJuYW1lcyI6WyJyb3V0ZSIsImdldCIsInJlcSIsInJlcyIsIm5leHQiLCJoZWFkZXJzIiwicmVmZXJlciIsInVzZXJuYW1lIiwicmVtb3RlX3VzZXIiLCJuYW1lIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBR2Usa0JBQVNBLEtBQVQsRUFBOEI7QUFDM0NBLEVBQUFBLEtBQUssQ0FBQ0MsR0FBTixDQUNFLFNBREYsRUFFRSxDQUFDQyxHQUFELEVBQXNCQyxHQUF0QixFQUFxQ0MsSUFBckMsS0FBc0U7QUFDcEUsUUFBSUYsR0FBRyxDQUFDRyxPQUFKLENBQVlDLE9BQVosS0FBd0IsUUFBNUIsRUFBc0M7QUFDcENGLE1BQUFBLElBQUksQ0FBQztBQUFFRyxRQUFBQSxRQUFRLEVBQUVMLEdBQUcsQ0FBQ00sV0FBSixDQUFnQkM7QUFBNUIsT0FBRCxDQUFKO0FBQ0QsS0FGRCxNQUVPO0FBQ0xMLE1BQUFBLElBQUksQ0FBQyxPQUFELENBQUo7QUFDRDtBQUNGLEdBUkg7QUFXQUosRUFBQUEsS0FBSyxDQUFDQyxHQUFOLENBQ0UsV0FERixFQUVFLENBQUNDLEdBQUQsRUFBc0JDLEdBQXRCLEVBQXFDQyxJQUFyQyxLQUFxRTtBQUNuRUEsSUFBQUEsSUFBSSxDQUFDO0FBQUVHLE1BQUFBLFFBQVEsRUFBRUwsR0FBRyxDQUFDTSxXQUFKLENBQWdCQztBQUE1QixLQUFELENBQUo7QUFDRCxHQUpIO0FBTUQiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBSZXNwb25zZSwgUm91dGVyIH0gZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyAkUmVxdWVzdEV4dGVuZCwgJE5leHRGdW5jdGlvblZlciB9IGZyb20gJy4uLy4uLy4uLy4uL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24ocm91dGU6IFJvdXRlcik6IHZvaWQge1xuICByb3V0ZS5nZXQoXG4gICAgJy93aG9hbWknLFxuICAgIChyZXE6ICRSZXF1ZXN0RXh0ZW5kLCByZXM6IFJlc3BvbnNlLCBuZXh0OiAkTmV4dEZ1bmN0aW9uVmVyKTogdm9pZCA9PiB7XG4gICAgICBpZiAocmVxLmhlYWRlcnMucmVmZXJlciA9PT0gJ3dob2FtaScpIHtcbiAgICAgICAgbmV4dCh7IHVzZXJuYW1lOiByZXEucmVtb3RlX3VzZXIubmFtZSB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5leHQoJ3JvdXRlJyk7XG4gICAgICB9XG4gICAgfVxuICApO1xuXG4gIHJvdXRlLmdldChcbiAgICAnLy0vd2hvYW1pJyxcbiAgICAocmVxOiAkUmVxdWVzdEV4dGVuZCwgcmVzOiBSZXNwb25zZSwgbmV4dDogJE5leHRGdW5jdGlvblZlcik6IGFueSA9PiB7XG4gICAgICBuZXh0KHsgdXNlcm5hbWU6IHJlcS5yZW1vdGVfdXNlci5uYW1lIH0pO1xuICAgIH1cbiAgKTtcbn1cbiJdfQ==